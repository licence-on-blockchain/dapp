<template name="licenses">
    <div class="dapp-flex-content">
        <main class="dapp-content">
            <h1><strong>Licenses</strong></h1>
            <table class="dapp-zebra">
                <tbody>
                {{#each licenses}}
                    {{> licenseRow}}
                {{/each}}
                </tbody>
            </table>
            {{#if revokedLicenses}}
                <h2>Revoked licenses</h2>
                <table class="dapp-zebra">
                    <tbody>
                    {{#each revokedLicenses}}
                        {{> licenseRow}}
                    {{/each}}
                    </tbody>
                </table>
            {{/if}}
        </main>
    </div>
</template>

<template name="licenseRow">
    <tr>
        <td><strong>{{description}}</strong></td>
        <td>
            <span title="Licenses owned by you">{{balance}}</span>
            {{#if borrowedBalance}}
                <span title="Licenses given to you that may be reclaimed by the original owner">
                (+{{borrowedBalance}})
                </span>
            {{/if}}
        </td>
        {{#if revoked}}
            <td></td>
        {{else}}
            <td><a href="/transfer/from/{{maxBalanceAddress}}/licenseContract/{{licenseContract}}/issuance/{{issuanceID}}"><i class="icon-arrow-up"></i> Transfer</a></td>
        {{/if}}
        <td><a class="showCertificate" href="#"><i class="icon-doc"></i> Certificate</a></td>
        <td><a class="showHistory" href="#"><i class="icon-graph"></i> History</a></td>
    </tr>
</template>

<template name="licenseCertificate">
    <div  class="certificateText">
        <p>
            {{#each certificateText}}
                {{this}}<br>
            {{/each}}
        </p>

        <p><i>Diese Erklärung wurde mit SSL-Zertifikat {{sslCertificate}} unterzeichnet.</i></p>
        <hr>
        <p>
            Soft&Cloud hat unter diesem LOB-License-Contract folgende Software-Lizenz bescheinigt:
        </p>
        <table class="dapp-zebra">
            <tbody>
            <tr>
                <td>Lizenztyp</td><td><strong>{{licenseDescription}}</strong></td>
            </tr>
            <tr>
                <td>Lizenzcode</td><td><strong>{{licenseCode}}</strong></td>
            </tr>
            <tr>
                <td>Anzahl</td><td><strong>{{originalSupply}}</strong></td>
            </tr>
            <tr>
                <td>Zeitpunkt der Bescheinigung</td><td><strong>{{auditTime}}</strong></td>
            </tr>
            <tr>
                <td>Empfänger der Bescheinigung</td><td><strong>{{originalOwner}}</strong></td>
            </tr>
            <tr>
                <td>Bescheinigungs-ID</td><td><strong>{{issuanceID}}</strong></td>
            </tr>
            </tbody>
        </table>

        <h4>Zertifikatinformationen:</h4>
        <table class="dapp-zebra">
            <tbody>
            <tr>
                <td>Zertifikat gültig</td><td><strong>{{certificateValid}}</strong></td>
            </tr>
            <tr>
                <td>Signatur gültig</td><td><strong>{{signatureValid}}</strong></td>
            </tr>
            <tr>
                <td>Zertifikat ausgestellt für</td><td><strong>{{leafCertificateCommonName}}</strong></td>
            </tr>
            <tr>
                <td>Zertifikataussteller</td><td><strong>{{rootCertificateCommonName}}</strong></td>
            </tr>
            </tbody>
        </table>
        {{#if auditRemark}}
            <p><i>Vermerk aus dem Lizenzaudit:</i> {{auditRemark}}</p>
        {{/if}}
        <hr>
        <p>{{transferDescription}}</p>
    </div>
    <div class="dapp-modal-buttons">
        <button class="dapp-primary-button hideModal">OK</button>
    </div>
</template>

<template name="licenseHistory">
    <canvas id="graphContainer"></canvas>
    <div class="dapp-modal-buttons">
        <button class="dapp-primary-button hideModal">OK</button>
    </div>
</template>